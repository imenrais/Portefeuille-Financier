{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\imenr\\\\OneDrive\\\\Desktop\\\\PortefeuilleFinancier\\\\frontend\\\\src\\\\components\\\\userspage\\\\UpdateUser.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport UserService from '../service/UserService';\nfunction UpdateUser() {\n  const navigate = useNavigate();\n  const {\n    userId\n  } = useParams();\n  const [userData, setUserData] = useState({\n    name: '',\n    email: '',\n    role: '',\n    city: ''\n  });\n  useEffect(() => {\n    fetchUserDataById(userId); // Pass the userId to fetchUserDataById\n  }, [userId]); //wheen ever there is a chane in userId, run this\n\n  const fetchUserDataById = async userId => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await UserService.getUserById(userId, token); // Pass userId to getUserById\n      const {\n        name,\n        email,\n        role,\n        city\n      } = response.ourUsers;\n      setUserData({\n        name,\n        email,\n        role,\n        city\n      });\n    } catch (error) {\n      console.error('Error fetching user data:', error);\n    }\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setUserData(prevUserData => ({\n      ...prevUserData,\n      [name]: value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const confirmDelete = window.confirm('Are you sure you want to delete this user?');\n      if (confirmDelete) {\n        const token = localStorage.getItem('token');\n        const res = await UserService.updateUser(userId, userData, token);\n        console.log(res);\n        // Redirect to profile page or display a success message\n        navigate(\"/admin/user-management\");\n      }\n    } catch (error) {\n      console.error('Error updating user profile:', error);\n      alert(error);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"auth-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, \"Update User\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, \"Name:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"name\",\n    value: userData.name,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, \"Email:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    name: \"email\",\n    value: userData.email,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, \"Role:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"role\",\n    value: userData.role,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 11\n    }\n  }, \"City:\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    name: \"city\",\n    value: userData.city,\n    onChange: handleInputChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, \"Update\")));\n}\nexport default UpdateUser;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","UserService","UpdateUser","navigate","userId","userData","setUserData","name","email","role","city","fetchUserDataById","token","localStorage","getItem","response","getUserById","ourUsers","error","console","handleInputChange","e","value","target","prevUserData","handleSubmit","preventDefault","confirmDelete","window","confirm","res","updateUser","log","alert","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","onChange"],"sources":["C:/Users/imenr/OneDrive/Desktop/PortefeuilleFinancier/frontend/src/components/userspage/UpdateUser.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport UserService from '../service/UserService';\n\nfunction UpdateUser() {\n  const navigate = useNavigate();\n  const { userId } = useParams();\n\n\n  const [userData, setUserData] = useState({\n    name: '',\n    email: '',\n    role: '',\n    city: ''\n  });\n\n  useEffect(() => {\n    fetchUserDataById(userId); // Pass the userId to fetchUserDataById\n  }, [userId]); //wheen ever there is a chane in userId, run this\n\n  const fetchUserDataById = async (userId) => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await UserService.getUserById(userId, token); // Pass userId to getUserById\n      const { name, email, role, city } = response.ourUsers;\n      setUserData({ name, email, role, city });\n    } catch (error) {\n      console.error('Error fetching user data:', error);\n    }\n  };\n\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setUserData((prevUserData) => ({\n      ...prevUserData,\n      [name]: value\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const confirmDelete = window.confirm('Are you sure you want to delete this user?');\n      if (confirmDelete) {\n        const token = localStorage.getItem('token');\n        const res = await UserService.updateUser(userId, userData, token);\n        console.log(res)\n        // Redirect to profile page or display a success message\n        navigate(\"/admin/user-management\")\n      }\n\n    } catch (error) {\n      console.error('Error updating user profile:', error);\n      alert(error)\n    }\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <h2>Update User</h2>\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label>Name:</label>\n          <input type=\"text\" name=\"name\" value={userData.name} onChange={handleInputChange} />\n        </div>\n        <div className=\"form-group\">\n          <label>Email:</label>\n          <input type=\"email\" name=\"email\" value={userData.email} onChange={handleInputChange} />\n        </div>\n        <div className=\"form-group\">\n          <label>Role:</label>\n          <input type=\"text\" name=\"role\" value={userData.role} onChange={handleInputChange} />\n        </div>\n        <div className=\"form-group\">\n          <label>City:</label>\n          <input type=\"text\" name=\"city\" value={userData.city} onChange={handleInputChange} />\n        </div>\n        <button type=\"submit\">Update</button>\n      </form>\n    </div>\n  );\n}\n\nexport default UpdateUser;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}